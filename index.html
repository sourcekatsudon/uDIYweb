<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水中ドローンDIY - 言語選択</title>
    <meta name="description" content="水中ドローンDIYの研究ブログ。言語を選択してください。">
    <link rel="stylesheet" href="css/language-selector.css">
    
    <!-- Hreflang for language selection page -->
    <link rel="alternate" hreflang="ja" href="/ja/">
    <link rel="alternate" hreflang="en" href="/en/">
    <link rel="alternate" hreflang="zh" href="/zh/">
    <link rel="alternate" hreflang="es" href="/es/">
    <link rel="alternate" hreflang="x-default" href="/">
</head>
<body>
    <div class="language-selector-container">
        <div class="selector-content">
            <div class="logo-section">
                <svg width="200" height="40" viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg">
                    <rect x="5" y="5" width="30" height="30" fill="white" rx="5"/>
                    <circle cx="20" cy="20" r="8" fill="#0066cc"/>
                    <text x="45" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="white">水中ドローンDIY</text>
                </svg>
                <h1>UnderwaterROV Research Blog</h1>
                <p>Choose your language / 言語を選択 / 选择语言 / Elige tu idioma</p>
            </div>
            
            <div class="language-options">
                <a href="/ja/" class="language-option" data-lang="ja">
                    <div class="flag">🇯🇵</div>
                    <div class="language-info">
                        <div class="language-name">日本語</div>
                        <div class="language-description">水中ドローン作って採って食べたい</div>
                    </div>
                </a>
                
                <a href="/en/" class="language-option" data-lang="en">
                    <div class="flag">🇺🇸</div>
                    <div class="language-info">
                        <div class="language-name">English</div>
                        <div class="language-description">Build, Catch, and Eat with Underwater Drones</div>
                    </div>
                </a>
                
                <a href="/zh/" class="language-option" data-lang="zh">
                    <div class="flag">🇨🇳</div>
                    <div class="language-info">
                        <div class="language-name">中文</div>
                        <div class="language-description">制作、捕获、品尝水下无人机</div>
                    </div>
                </a>
                
                <a href="/es/" class="language-option" data-lang="es">
                    <div class="flag">🇪🇸</div>
                    <div class="language-info">
                        <div class="language-name">Español</div>
                        <div class="language-description">Construir, Capturar y Comer con Drones Submarinos</div>
                    </div>
                </a>
            </div>
            
            <div class="auto-detect-section">
                <p id="browser-lang-info">ブラウザ言語を検出中...</p>
                <button id="auto-redirect-btn" style="display: none;">推奨言語で続行</button>
            </div>
        </div>
    </div>

    <script src="config/i18n.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            detectBrowserLanguage();
        });
        
        function detectBrowserLanguage() {
            const userLang = navigator.language || navigator.userLanguage;
            const langCode = userLang.toLowerCase();
            const infoElement = document.getElementById('browser-lang-info');
            const buttonElement = document.getElementById('auto-redirect-btn');
            
            let detectedLang = 'ja'; // デフォルト
            let langName = '日本語';
            
            if (langCode.startsWith('en')) {
                detectedLang = 'en';
                langName = 'English';
            } else if (langCode.startsWith('zh')) {
                detectedLang = 'zh';
                langName = '中文';
            } else if (langCode.startsWith('es')) {
                detectedLang = 'es';
                langName = 'Español';
            }
            
            // 検出された言語をハイライト
            const detectedOption = document.querySelector(`[data-lang="${detectedLang}"]`);
            if (detectedOption) {
                detectedOption.classList.add('recommended');
            }
            
            infoElement.textContent = `ブラウザ言語: ${langName} を検出しました`;
            buttonElement.textContent = `${langName}で続行`;
            buttonElement.style.display = 'block';
            buttonElement.onclick = () => {
                window.location.href = `/${detectedLang}/`;
            };
        }
    </script>
</body>
</html>